<div data-aos="fade-up">
  <div class="py-2 px-4 pb-8">
    <h2 class="text-purple-700 font-bold">Lista De Usuarios</h2>
  </div>
  <div class="bg-white w-full rounded-2xl p-4">
    <div class="flex justify-between items-center mb-4">
      <app-button
        text="Nuevo"
        bgColor="bg-purple-700"
        textColor="text-white"
        [icon]="getIcon('plus')"
        (clicked)="openModal()"
      >
      </app-button>
      <div class="">
        <app-search-input />
      </div>
    </div>
    <div>
      <app-table
        [headers]="headers"
        [data]="data"
        keyField="id"
        (actionClicked)="handleAction($event)"
      ></app-table>
    </div>
  </div>
</div>

<app-modal>
  <div modal-create>
    <app-user-modal (questionCreated)="refreshData()"></app-user-modal>
  </div>
  <div modal-edit><app-user-modal [data]="user" (questionCreated)="refreshData()"></app-user-modal></div>
</app-modal>

@if (isLoading) {
  <app-loading />
}

<!--<p>user works!</p>
<div class="container mx-auto mt-5" *ngIf="isEditing">
  <div class="card shadow-lg border-0">
    <div class="card-header bg-blue-500 text-white">
      <h4 class="mb-0">
        <i class="bi bi-person-fill mr-2"></i>
        {{ currentUserId ? 'Editar Usuario' : 'Agregar Usuario' }}
      </h4>
    </div>
    <div class="card-body">
      <form [formGroup]="userForm" (ngSubmit)="saveUser()">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
          <div class="col">
            <label for="firstName" class="font-semibold">Nombre</label>
            <input
              type="text" class="form-input mt-1 block w-full" id="firstName" formControlName="firstName"
              placeholder="Ingrese el nombre"
              [ngClass]="{'border-red-500': userForm.controls['firstName'].invalid && userForm.controls['firstName'].touched}">
            <div *ngIf="userForm.controls['firstName'].invalid && userForm.controls['firstName'].touched" class="text-red-500">Ingrese un nombre v치lido.</div>
          </div>
          <div class="col">
            <label for="lastName" class="font-semibold">Apellido</label>
            <input
              type="text" class="form-input mt-1 block w-full" id="lastName" formControlName="lastName"
              placeholder="Ingrese el apellido"
              [ngClass]="{'border-red-500': userForm.controls['lastName'].invalid && userForm.controls['lastName'].touched}">
            <div *ngIf="userForm.controls['lastName'].invalid && userForm.controls['lastName'].touched" class="text-red-500">Ingrese un apellido v치lido.</div>
          </div>
          <div class="col">
            <label for="city" class="font-semibold">Ciudad</label>
            <input
              type="text" class="form-input mt-1 block w-full" id="city" formControlName="city"
              placeholder="Ingrese la ciudad"
              [ngClass]="{'border-red-500': userForm.controls['city'].invalid && userForm.controls['city'].touched}">
            <div *ngIf="userForm.controls['city'].invalid && userForm.controls['city'].touched" class="text-red-500">Ingrese una ciudad v치lida.</div>
          </div>
        </div>
        <div class="mt-4 flex justify-end">
          <button type="button" class="btn btn-outline-secondary mr-2" (click)="cancelEdit()">
            <i class="bi bi-x-circle mr-1"></i> Cancelar
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">
            <i class="bi bi-save mr-1"></i> Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="container mx-auto mt-5">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-blue-600 font-semibold">Gesti칩n de Usuarios</h2>
    <button class="btn btn-success" (click)="isEditing = true; currentUserId = null; userForm.reset()">
      <i class="bi bi-plus-circle mr-1"></i> Nuevo Usuario
    </button>
  </div>

  <div class="card shadow-sm border-0">
    <div class="card-body p-0">
      <div class="overflow-x-auto">
        <table class="table-auto w-full text-left">
          <thead class="bg-gray-800 text-white">
            <tr>
              <th class="px-4 py-2" style="width: 5%">#</th>
              <th class="px-4 py-2">Nombre</th>
              <th class="px-4 py-2">Apellido</th>
              <th class="px-4 py-2">Ciudad</th>
              <th class="px-4 py-2" style="width: 20%">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users; let i = index">
              <td class="px-4 py-2 text-center">{{ i + 1 }}</td>
              <td class="px-4 py-2">{{ user.firstName }}</td>
              <td class="px-4 py-2">{{ user.lastName }}</td>
              <td class="px-4 py-2">
                <span class="bg-blue-200 text-blue-800 py-1 px-2 rounded-full">{{ user.city }}</span>
              </td>
              <td class="px-4 py-2">
                <div class="flex gap-2">
                  <button class="btn btn-sm btn-outline-primary" (click)="editUser(user)">
                    <i class="bi bi-pencil-square"></i> Editar
                  </button>
                  <button class="btn btn-sm btn-outline-danger" (click)="deleteUser(user)">
                    <i class="bi bi-trash"></i> Eliminar
                  </button>
                </div>
              </td>
            </tr>
            <tr *ngIf="users.length === 0">
              <td colspan="5" class="text-center py-4 text-gray-500">
                <i class="bi bi-exclamation-circle"></i> No hay usuarios registrados
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
-->
